<head>
  <title>Tic-Tac-Toe</title>
</head>

<body>
  {{#if loggingIn}}
     Logging in ...
  {{else}}
    {{#if currentUser}}
      <div id="main-pane">
        {{> game}}
      </div>

      <div id="side-pane">
        {{loginButtons}}
        {{> games}}
      </div>
    {{else}}
      {{loginButtons}}
    {{/if}}
  {{/if}}
</body>

<template name="games">
  {{#if loading_user}}
    <h3>Games</h3>
    Loading ...
  {{else}}
    <h3>Active Games</h3>
    <div class="games">
      {{#each active_games}}
        <div class="game {{selected}}">
          <div class="display">
            <a class="game-name" href="/{{id}}">
              {{description}}
            </a>
          </div>
        </div>
      {{/each}}
    </div>
    <div id="createGame">
      <button id="newGame">New Game!</button>
    </div>

    <h3>Won Games</h3>
    <div class="games">
      {{#each won_games}}
        <div class="game {{selected}}">
          <div class="display">
            <a class="game-name" href="/{{id}}">
              {{description}}
            </a>
          </div>
        </div>
      {{/each}}
    </div>

    <h3>Lost Games</h3>
    <div class="games">
      {{#each lost_games}}
        <div class="game {{selected}}">
          <div class="display">
            <a class="game-name" href="/{{id}}">
              {{description}}
            </a>
          </div>
        </div>
      {{/each}}
    </div>
  {{/if}}
</template>

<template name="game">
  {{#if any_game_selected}}
    <div id="game-view">
      {{#if loading_game}}
        Loading...
      {{else}}
        {{> game_field}}
      {{/if}}
    </div>
  {{/if}}
</template>

<template name="game_field">
  <table class="tic-tac-toe-field">
    <tbody>
      {{#each rows}}
	    <tr>
	      {{#each cells}}
		      {{> cell_info}}
		    {{/each}}
      </tr>
	  {{/each}}
	</tbody>
  </table>
</template>

<template name="cell_info">
  <td>
    {{#if value}}
      <button disabled="true">{{value}}</button>
    {{else}}
      <button></button>
    {{/if}}
  </td>
</template>